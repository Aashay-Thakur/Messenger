function enter_chat(a) {
    var e = $(".message").val();
    if ("" != e && /[^\r\n|\n|\r|\n\r]/gm.test(e)) {
        e = e.replace(/(?:<)/g, "&lt;");
        e = e.replace(/(?:\r\n|\r|\n)/g, "<br>");
        if (document.querySelector(".chats").childElementCount != 0) {
            if (document.querySelector(".chats").lastElementChild.classList.contains("chat-left")) {
                var t = `<div class="chat chat-right">
              <div class="chat-avatar"></div>
              <div class="chat-body">
              <div class="chat-text" animate fadeLeft" style="animation-duration: 0.2s !important;">
              <p>${e}</p>
              </div>
              </div>
              </div>`;
                $(".chats").append(t), $(".message").val(""), $(".chat-area").scrollTop($(".chat-area > .chats").height());
            } else {
                var t = '<div class="chat-text"><p>' + e + "</p></div>";
                $(".chat-right:last-child .chat-body").append(t), $(".message").val(""), $(".chat-area").scrollTop($(".chat-area > .chats").height());
            }
        } else {
            var t = `<div class="chat chat-right">
              <div class="chat-avatar"></div>
              <div class="chat-body">
              <div class="chat-text" animate fadeLeft" style="animation-duration: 0.2s !important;">
              <p>${e}</p>
              </div>
              </div>
              </div>`;
            $(".chats").append(t), $(".message").val(""), $(".chat-area").scrollTop($(".chat-area > .chats").height());
        }
    }
    $("textarea#chat-message").focus();
}

$(document).ready(function () {
    "use strict";
    if ((900 < $(window).width() && $("#chat-sidenav").removeClass("sidenav"), 0 < $(".sidebar-chat").length)) new PerfectScrollbar(".sidebar-chat", { theme: "dark" });
    if (0 < $(".chat-area").length) new PerfectScrollbar(".chat-area", { theme: "dark" });
    $(".sidenav-trigger").on("click", function () {
        $(window).width() < 960 && ($(".sidenav").sidenav("close"), $(".app-sidebar").sidenav("close"));
    }),
        $("#chat-sidenav").sidenav({
            onOpenStart: function () {
                $("#sidebar-list").addClass("sidebar-show");
            },
            onCloseEnd: function () {
                $("#sidebar-list").removeClass("sidebar-show");
            },
        }),
        $(window).width() < 900 && ($(".app-chat .sidebar-left.sidebar-fixed").removeClass("animate fadeUp animation-fast"), $(".app-chat .sidebar-left.sidebar-fixed .sidebar").removeClass("animate fadeUp")),
        $("#chat_filter").on("keyup", function () {
            $(".chat-user").css("animation", "none");
            var a = $(this).val().toLowerCase();
            "" != a
                ? ($(".sidebar-chat .chat-list .chat-user").filter(function () {
                      $(this).toggle(-1 < $(this).text().toLowerCase().indexOf(a));
                  }),
                  0 == $(".chat-user:visible").length ? $(".no-data-found").hasClass("show") || $(".no-data-found").addClass("show") : $(".no-data-found").removeClass("show"))
                : $(".sidebar-chat .chat-list .chat-user").show();
        }),
        $(".chat-area").scrollTop($(".chat-area > .chats").height()),
        0 < $("html[data-textdirection='rtl']").length &&
            $("#chat-sidenav").sidenav({
                edge: "right",
                onOpenStart: function () {
                    $("#sidebar-list").addClass("sidebar-show");
                },
                onCloseEnd: function () {
                    $("#sidebar-list").removeClass("sidebar-show");
                },
            });
});
